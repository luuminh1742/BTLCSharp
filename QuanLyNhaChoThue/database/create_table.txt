/*
Created		12/8/2020
Modified		12/9/2020
Project		
Model		
Company		
Author		
Version		
Database		MS SQL 7 
*/

create database QuanLyNhaThue
go
use QuanLyNhaThue
go
Create table [User] (
	[Id] Integer Identity,
	[UserName] Varchar(200) NULL,
	[Password] Varchar(255) NULL,
	[FullName] Nvarchar(100) NULL,
	[Gender] Char(10) NULL,
	[Address] Nvarchar(255) NULL,
	[Phone] Char(12) NULL,
	[CreatedDate] Datetime NULL,
	[ModifiedDate] Datetime NULL,
	[Status] Bit NULL,
Primary Key  ([Id])
) 
go

Create table [House] (
	[Id] Integer Identity,
	[Name] Nvarchar(200) NULL,
	[Address] Nvarchar(255) NULL,
	[Description] Text NULL,
	[UserId] Integer NOT NULL,
Primary Key  ([Id])
) 
go

Create table [Room] (
	[Id] Integer Identity,
	[HouseId] Integer NOT NULL,
	[RoomName] Nvarchar(50) NOT NULL,
	[RoomMoney] Integer NOT NULL,
	[ElectricMoney] Integer NULL,
	[WaterMoney] Integer NULL,
	[NetworkMoney] Integer NULL,
	[OtherMoney] Integer NULL,
	[NetworkMoneyType] Nvarchar(50) NULL,
	[WaterMoneyType] Nvarchar(50) NULL,
	[LastElectricNumber] Integer NULL,
	[LastWaterNumber] Integer NULL,
	[Member] Integer NULL,
	[Description] Text NULL,
	[Status] Bit NULL,
Primary Key  ([Id])
) 
go

Create table [Member] (
	[UserId] Integer NOT NULL,
	[RoomId] Integer NOT NULL,
Primary Key  ([UserId],[RoomId])
) 
go

Create table [Bill] (
	[Id] Integer Identity ,
	[RoomId] Integer NOT NULL,
	[MemberName] Nvarchar(255) NULL,
	[RoomMoney] Integer NULL,
	[ElectricMoney] Integer NULL,
	[WaterMoney] Integer NULL,
	[NetworkMoney] Integer NULL,
	[OtherMoney] Integer NULL,
	[LastElectricNumber] Integer NULL,
	[ElectricNumber] Integer NULL,
	[LastWaterNumber] Integer NULL,
	[WaterNumber] Integer NULL,
	[TotalMoney] Integer NULL,
	[ModifiedBy] Nvarchar(100) NULL,
	[CreatedDate] Datetime NULL,
	[ModifiedDate] Datetime NULL,
	[Status] Bit NULL,
Primary Key  ([Id])
) 
go


Alter table [Member] add  foreign key([UserId]) references [User] ([Id]) 
go
Alter table [House] add  foreign key([UserId]) references [User] ([Id]) 
go
Alter table [Room] add  foreign key([HouseId]) references [House] ([Id]) 
go
Alter table [Member] add  foreign key([RoomId]) references [Room] ([Id]) 
go
Alter table [Bill] add  foreign key([RoomId]) references [Room] ([Id]) 
go


Set quoted_identifier on
go

Set quoted_identifier off
go


